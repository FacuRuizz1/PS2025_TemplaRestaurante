<!-- producto-modal.component.html -->
<div class="modal-content d-flex align-items-center">
  <!-- Header del modal -->
  <div class="modal-header custom-header d-flex justify-content-between align-items-center">
    <h4 class="modal-title">{{isEditMode ? 'Editar Producto' : 'Nuevo Producto'}}</h4>
    <button type="button" class="btn-close custom-close" aria-label="Close" (click)="activeModal.dismiss()"></button>
  </div>
  
  <!-- Body del modal -->
  <div class="modal-body custom-body">
    <form>
      <!-- Nombre del producto -->
      <div class="form-row">
        <div class="form-group full-width">
          <input type="text" id="nombre" name="nombre" class="form-control custom-input"
                 [class.is-invalid]="!nombreValido && producto.nombre"
                 placeholder="Nombre del producto" 
                 [(ngModel)]="producto.nombre" 
                 (blur)="onNombreChange()"
                 required>
          <div class="invalid-feedback" *ngIf="!nombreValido && producto.nombre">
            El nombre del producto es requerido
          </div>
        </div>
      </div>

      <!-- Tipo y Unidad de Medida -->
      <div class="form-row">
        <div class="form-group">
          <select class="form-select custom-select" 
                  [(ngModel)]="producto.tipo" 
                  name="tipo" required>
            <option value="" disabled>Seleccionar Tipo</option>
            <option *ngFor="let tipo of tiposProducto" [value]="tipo.value">
              {{ tipo.label }}
            </option>
          </select>
        </div>
        
        <div class="form-group">
          <select class="form-select custom-select" 
                  [(ngModel)]="producto.unidadMedida" 
                  name="unidadMedida" required>
            <option value="" disabled>Seleccionar Unidad</option>
            <option *ngFor="let unidad of unidadesMedida" [value]="unidad.value">
              {{ unidad.label }}
            </option>
          </select>
        </div>
      </div>

      <!-- Stock Actual -->
      <div class="form-row">
        <div class="form-group full-width">
          <label for="stockActual" class="form-label">Stock Actual</label>
          <div class="input-group">
            <input type="number" id="stockActual" name="stockActual" 
                   class="form-control custom-input"
                   placeholder="0" 
                   [(ngModel)]="producto.stockActual" 
                   min="0" step="0.01" required>
            <span class="input-group-text">
              {{ producto.unidadMedida === 'KILOGRAMO' ? 'kg' : 
                 producto.unidadMedida === 'LITRO' ? 'lt' : 'g' }}
            </span>
          </div>
        </div>
      </div>

      <!-- Stock Mínimo y Máximo -->
      <div class="form-row">
        <div class="form-group">
          <label for="stockMinimo" class="form-label">Stock Mínimo</label>
          <div class="input-group">
            <input type="number" id="stockMinimo" name="stockMinimo" 
                   class="form-control custom-input"
                   placeholder="0" 
                   [(ngModel)]="producto.stockMinimo" 
                   min="0" step="0.01" required>
            <span class="input-group-text">
              {{ producto.unidadMedida === 'KILOGRAMO' ? 'kg' : 
                 producto.unidadMedida === 'LITRO' ? 'lt' : 'g' }}
            </span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="stockMaximo" class="form-label">Stock Máximo</label>
          <div class="input-group">
            <input type="number" id="stockMaximo" name="stockMaximo" 
                   class="form-control custom-input"
                   placeholder="0" 
                   [(ngModel)]="producto.stockMaximo" 
                   min="0" step="0.01" required>
            <span class="input-group-text">
              {{ producto.unidadMedida === 'KILOGRAMO' ? 'kg' : 
                 producto.unidadMedida === 'LITRO' ? 'lt' : 'g' }}
            </span>
          </div>
        </div>
      </div>

      <!-- Estado Activo -->
      <div class="form-row">
        <div class="form-group full-width d-flex align-items-center">
          <div class="toggle-container"> 
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="producto.activo" name="activo">
              <span class="toggle-slider"></span>
            </label>
            <span class="toggle-label">Producto Activo</span>
          </div>
        </div>
      </div>

      
    </form>
  </div>

  <!-- Footer del modal -->
  <div class="modal-footer custom-footer">
    <button type="button" 
            class="btn custom-btn-cancel" 
            (click)="cancel()">
      Cancelar
    </button>
    <button type="button" 
            class="btn custom-btn-save" 
            (click)="save()"
            [disabled]="!isFormValid">
      {{ isEditMode ? 'Actualizar' : 'Guardar' }}
    </button>
  </div>
</div>

<div class="header pt-3 px-3">
    <!-- T√≠tulo a la izquierda -->
    <div class="header-left">
        <h1 class="texto-elegante">Men√∫s</h1>
    </div>

    <!-- Controles a la derecha -->
    <div class="header-right">
        <!-- Input de b√∫squeda -->
        <div class="search-container">
            <input type="text" id="busqueda" name="busqueda" class="form-control custom-input" 
                   (input)="onBusquedaChange()"
                   placeholder="üîéBuscar men√∫..." [(ngModel)]="busqueda">
        </div>

        <div class="btn-group filter-group" role="group" aria-label="Filtro por estado">
            <input type="radio" class="btn-check" name="estado" id="ACTIVOS" value="ACTIVOS" 
                   (change)="onEstadoChange('ACTIVOS')"
                   [(ngModel)]="estadoSeleccionado" autocomplete="off">
            <label class="btn custom-radio" for="ACTIVOS">Activos</label>

            <input type="radio" class="btn-check" name="estado" id="TODOS_ESTADO" value="TODOS" 
                   (change)="onEstadoChange('TODOS')"
                   [(ngModel)]="estadoSeleccionado" autocomplete="off">
            <label class="btn custom-radio" for="TODOS_ESTADO">Todos</label>

            <input type="radio" class="btn-check" name="estado" id="INACTIVOS" value="INACTIVOS" 
                   (change)="onEstadoChange('INACTIVOS')"
                   [(ngModel)]="estadoSeleccionado" autocomplete="off">
            <label class="btn custom-radio" for="INACTIVOS">Inactivos</label>
        </div>
    </div>
</div>

<hr class="header-divider">

<div class="body mt-5 px-5">
    <!-- ‚úÖ Loading spinner -->
    <div *ngIf="cargando" class="text-center py-4">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
    </div>

    <!-- ‚úÖ Grid de men√∫s -->
    <div *ngIf="!cargando" class="menus-grid">
        <div class="menu-card" *ngFor="let menu of menus" (click)="abrirModalEditarMenu(menu)">
            <!-- ‚úÖ Header con nombre y badge -->
            <div class="menu-header">
                <h3 class="menu-nombre">{{ menu.nombre }}</h3>
                <div class="estado-badge" [ngClass]="getEstadoBadgeClass(menu)">
                    {{ getEstadoTexto(menu) }}
                </div>
            </div>

            <!-- ‚úÖ L√≠nea divisora debajo del t√≠tulo -->
            <div class="menu-title-divider"></div>

            <!-- ‚úÖ Contenido -->
            <div class="menu-content">
                <!-- Descripci√≥n -->
                <p class="menu-descripcion">{{ menu.descripcion }}</p>

                <!-- ‚úÖ Disponibilidad por fechas -->
                <div class="menu-disponibilidad" *ngIf="menu.disponibleDesde || menu.disponibleHasta">
                    <span class="disponibilidad-titulo">Disponibilidad:</span>
                    <div class="disponibilidad-lista">
                        Desde: {{ menu.disponibleDesde }}
                        <span *ngIf="menu.disponibleHasta"> hasta: {{ menu.disponibleHasta }}</span>
                    </div>
                </div>

                <!-- ‚úÖ Contenidos -->
                <div class="menu-contenidos">
                    <span class="contenidos-titulo">Contenidos:</span>
                    <div class="contenidos-lista">
                        {{ formatearContenidos(menu) }}
                    </div>
                </div>

                <!-- ‚úÖ Precio -->
                <div class="menu-info">
                    <span class="menu-precio-label">Precio:</span>
                    <span class="menu-precio">${{ menu.precio | number:'1.2-2' }}</span>
                </div>
            </div>

            <!-- ‚úÖ Indicador visual de que es clickeable -->
            <div class="click-indicator">
                <span>Click para editar</span>
            </div>
        </div>
    </div>

    <!-- ‚úÖ Mensaje cuando no hay men√∫s -->
    <div *ngIf="!cargando && (!menus || menus.length === 0)" class="no-menus">
        <div class="text-center py-5">
            <h4 class="text-muted">No se encontraron men√∫s</h4>
            <p class="text-muted">Intenta ajustar los filtros o agrega un nuevo men√∫</p>
        </div>
    </div>
</div>

<!-- ‚úÖ Paginaci√≥n -->
<div *ngIf="!cargando && pageInfo && pageInfo.totalPages > 1" class="pagination-container">
    <nav aria-label="Navegaci√≥n de p√°ginas">
        <ul class="pagination justify-content-center">
            <!-- Bot√≥n anterior -->
            <li class="page-item" [class.disabled]="pageInfo.first">
                <button class="page-link" (click)="irAPagina(pageInfo.number - 1)" [disabled]="pageInfo.first">
                    Anterior
                </button>
            </li>

            <!-- N√∫meros de p√°gina -->
            <li class="page-item" *ngFor="let pagina of obtenerPaginasVisibles()" 
                [class.active]="pagina === pageInfo.number">
                <button class="page-link" (click)="irAPagina(pagina)">
                    {{ pagina + 1 }}
                </button>
            </li>

            <!-- Bot√≥n siguiente -->
            <li class="page-item" [class.disabled]="pageInfo.last">
                <button class="page-link" (click)="irAPagina(pageInfo.number + 1)" [disabled]="pageInfo.last">
                    Siguiente
                </button>
            </li>
        </ul>
    </nav>

    <!-- Info de paginaci√≥n -->
    <div class="pagination-info text-center mt-2">
        <small class="text-muted">
            Mostrando {{ pageInfo.numberOfElements }} de {{ pageInfo.totalElements }} men√∫s
            (P√°gina {{ pageInfo.number + 1 }} de {{ pageInfo.totalPages }})
        </small>
    </div>
</div>

<!-- ‚úÖ Bot√≥n flotante para agregar -->
<button class="floating-btn" (click)="abrirModalNuevoMenu()">
    ‚ûï
</button>
